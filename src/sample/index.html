<!doctype html>
<html>
<head>
<title>StkWebApp - Sample</title>

<script src="jquery-3.2.0.min.js"></script>
<link rel="stylesheet" href="./style.css" />

<script type="text/javascript">

    window.onload = function() {
        boxResize();
        var respdata = { Person : [{'name' : '', 'age' : 0, 'address' : '' }] };
        var resphtml = { hello : '' };
        var resphtml2 = { hello2 : '' };

        sendRequestRecvResponse('./api/aaa/bbb/', null, respdata);
        $personDat = $('<table border="1"></table>');
        for (var Loop = 0; Loop < 3; Loop++) {
            $personDat.append('<tr><td>' + respdata.Person[Loop].name + '</td><td>' + respdata.Person[Loop].age + '</td><td>' + respdata.Person[Loop].address + '</td></tr>');
        }
        $('#box_info').append($personDat);

        sendRequestRecvResponse('./api/aaa/xxx/', null, resphtml);
        $h1Dat = $('<h1></h1>');
        $h1Dat.append(resphtml.hello);
        $('#box_info').append($h1Dat);

        sendRequestRecvResponse('./api/bbb/xxx/', null, resphtml2);
        $h2Dat = $('<h2></h2>');
        $h2Dat.append(resphtml2.hello2);
        $('#box_info').append($h2Dat);
    }

    function boxResize() {
        var box_info = document.getElementById('box_info');
        var box_cont = document.getElementById('container');
        var boxHeight = getshowHeight();
        var boxWidth  = getshowWidth();
        if (boxHeight < 440) {
            boxHeight = 440;
        }
        if (boxWidth < 580) {
            boxWidth = 580;
        }
        box_info.style.height = boxHeight - 20 + 'px';
        box_info.style.width  = boxWidth  + 'px';
        box_cont.style.height = boxHeight + 'px';
        box_cont.style.width  = boxWidth  + 'px';
    }

    function getshowHeight() {
        if (window.innerHeight)
            return window.innerHeight;
        if (document.body.parentNode.clientHeight)
            return document.body.parentNode.clientHeight;
        if (document.body.clientHeight)
            return document.body.clientHeight;
    }

    function getshowWidth() {
        if (window.innerWidth)
            return window.innerWidth;
        if (document.body.parentNode.clientWidth)
            return document.body.parentNode.clientWidth;
        if (document.body.clientWidth)
            return document.body.clientWidth;
    }

    function sendRequestRecvResponse(url, request, response) {
        var resultcode = 0;
        $.ajax({
            type: 'GET',
            dataType: 'json',
            url: url,
            data: request,
            async: false,
            success: function(msg){
                resultcode = 10
                $.extend(response,msg);
            },
            error: function(){
                resultcode = 20
            }
        });
        return resultcode;
    }

</script>
</head>

<body style="overflow: hidden;" onresize="boxResize()">
<div id="container">
    <div class="headtailbar">
        <table class="ttblstyle" width="100%"><tr>
            <td align="left"><b>StkWebApp - Sample</b></td>
            <td align="right">Copyright (C) S.Takeuchi</td>
        </tr></table>
    </div>

    <div id="box_info">
        <noscript>
            JavaScriptが無効です。<br>ブラウザの設定を変更してJavaScriptを有効後，ページをリフレッシュしてください。<br>
        </noscript>
    </div>
</div>

</body>

</html>
